{
  "name": "extas/workflow",
  "package_classes": [
    {
      "interface": "extas\\interfaces\\workflows\\schemas\\IWorkflowSchemaRepository",
      "class": "extas\\components\\workflows\\schemas\\WorkflowSchemaRepository"
    },
    {
      "interface": "extas\\interfaces\\workflows\\transitions\\IWorkflowTransitionRepository",
      "class": "extas\\components\\workflows\\transitions\\WorkflowTransitionRepository"
    },
    {
      "interface": "extas\\interfaces\\workflows\\states\\IWorkflowStateRepository",
      "class": "extas\\components\\workflows\\states\\WorkflowStateRepository"
    },
    {
      "interface": "extas\\interfaces\\workflows\\transitions\\dispatchers\\ITransitionDispatcherRepository",
      "class": "extas\\components\\workflows\\transitions\\dispatchers\\TransitionDispatcherRepository"
    },
    {
      "interface": "extas\\interfaces\\workflows\\transitions\\dispatchers\\ITransitionDispatcherTemplateRepository",
      "class": "extas\\components\\workflows\\transitions\\dispatchers\\TransitionDispatcherTemplateRepository"
    },
    {
      "interface": "extas\\interfaces\\workflows\\entities\\IWorkflowEntityTemplateRepository",
      "class": "extas\\components\\workflows\\entities\\WorkflowEntityTemplateRepository"
    }
  ],
  "plugins": [
    {
      "class": "extas\\components\\plugins\\PluginInstallWorkflowSchemas",
      "stage": "extas.install"
    },
    {
      "class": "extas\\components\\plugins\\PluginInstallWorkflowTransitions",
      "stage": "extas.install"
    },
    {
      "class": "extas\\components\\plugins\\PluginInstallWorkflowStates",
      "stage": "extas.install"
    },
    {
      "class": "extas\\components\\plugins\\PluginInstallTransitionDispatchers",
      "stage": "extas.install"
    },
    {
      "class": "extas\\components\\plugins\\PluginInstallTransitionDispatcherTemplates",
      "stage": "extas.install"
    },
    {
      "class": "extas\\components\\plugins\\PluginInstallWorkflowEntityTemplates",
      "stage": "extas.install"
    }
  ],
  "workflow_transition_dispatcher_templates": [
    {
      "name": "condition__datetime",
      "title": "Datetime condition",
      "description": "Check current datetime, allow to restrict execution before the set time.",
      "class": "extas\\components\\plugins\\workflows\\conditions\\ConditionDateTime",
      "type": "condition",
      "parameters": [
        {
          "name": "datetime",
          "template": "datetime",
          "value": "",
          "title": "Дата и время",
          "description": "Timestamp даты и времени"
        },
        {
          "name": "compare",
          "template": "string",
          "template@string": {
            "allowed": ["equal", "notEqual", "greater", "lower"]
          },
          "value": "equal",
          "title": "Условие",
          "description": "Условие сравнения. Допускается: equal, notEqual, greater, lower"
        }
      ]
    },
    {
      "name": "validator__context_params",
      "title": "Check context params.",
      "description": "Check context has required by validator params.",
      "class": "extas\\components\\plugins\\workflows\\validators\\ValidatorContextHasAllParams",
      "type": "validator",
      "parameters": []
    },
    {
      "name": "validator__entity_params",
      "title": "Check entity params",
      "description": "Check entity has required by validator params",
      "class": "extas\\components\\plugins\\workflows\\validators\\ValidatorEntityHasAllParams",
      "type": "validator",
      "parameters": []
    },
    {
      "name": "condition__field_value_required",
      "title": "Field value required",
      "description": "Check field value is not empty",
      "class": "extas\\components\\plugins\\workflows\\conditions\\ConditionFieldValueRequired",
      "type": "condition",
      "parameters": [
        {
          "name": "field_name",
          "template": "string",
          "value": "",
          "title": "Имя поля",
          "description": "Имя поля, значение которого должно что-то содержать"
        }
      ]
    },
    {
      "name": "condition__field_value",
      "title": "Field value",
      "description": "Check field value is equal to specific data",
      "class": "extas\\components\\plugins\\workflows\\conditions\\ConditionFieldValue",
      "type": "condition",
      "parameters": [
        {
          "name": "field_name",
          "template": "string",
          "title": "Имя поля",
          "description": "Имя поля из шаблона сущности"
        },
        {
          "name": "field_value",
          "template": "string",
          "title": "Значение поля",
          "description": "Значение, которому должно ровняться содержимое соответствующего поля"
        }
      ]
    },
    {
      "name": "condition__field_value_compare",
      "title": "Compare field value",
      "description": "Compare field value with defined value",
      "class": "extas\\components\\plugins\\workflows\\conditions\\ConditionFieldValueCompare",
      "type": "condition",
      "parameters": [
        {
          "name": "field_name",
          "template": "string",
          "title": "Имя поля",
          "description": "Имя поля из шаблона сущности"
        },
        {
          "name": "field_value",
          "template": "string",
          "title": "Значение поля",
          "description": "Значение с которым будет сравниваться содержимое соответствующего поля"
        },
        {
          "name": "field_compare",
          "template": "string",
          "title": "Условие",
          "description": "Условие сравнения значения и содержимого поля",
          "template@string": {
            "allow": [
              "equal", "notEqual", "greater", "lower", "greaterOrEqual", "lowerOrEqual",
              "empty", "notEmpty", "like", "notLike", "in", "notIn"
            ]
          }
        },
        {
          "name": "field_type",
          "template": "string",
          "title": "Тип поля",
          "description": "Тип поля влияет на способ сравнения значения и содержимого поля",
          "template@string": {
            "allow": ["string", "number"]
          }
        }
      ]
    }
  ]
}